"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("@sigureya/rpgtypes");function pe(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const c=pe(r),u=()=>[0,0,0,0,0,0,0,0],he=e=>({id:0,name:"",nickname:"",profile:"",note:"",classId:0,initialLevel:1,maxLevel:99,characterIndex:0,characterName:"",faceIndex:0,faceName:"",battlerName:"",traits:[],equips:[],...e}),Ce=e=>({battlerHue:0,id:0,name:"",note:"",battlerName:"",traits:[],params:u(),exp:0,gold:0,dropItems:[],actions:[],...e}),ge=e=>({price:0,id:0,name:"",note:"",iconIndex:0,description:"",etypeId:0,params:u(),traits:[],...e}),Te=e=>({price:0,id:0,name:"",note:"",iconIndex:0,description:"",etypeId:0,wtypeId:0,params:u(),traits:[],damage:R(),...e}),Me=e=>({id:0,name:"",note:"",traits:[],learnings:[],params:u(),expParams:[],...e}),R=e=>({type:0,elementId:0,formula:"0",variance:20,critical:!1,...e}),Se=e=>({id:0,name:"",iconIndex:0,description:"",note:"",price:0,consumable:!1,scope:0,occasion:0,speed:0,successRate:100,repeats:1,tpGain:0,hitType:0,animationId:0,damage:R(),effects:[],...e}),Ie=e=>({animationId:0,damage:R(),description:"",hitType:0,iconIndex:0,id:0,message1:"",message2:"",mpCost:0,name:"",note:"",occasion:0,repeats:1,requiredWtypeId1:0,requiredWtypeId2:0,scope:0,speed:0,stypeId:0,successRate:100,tpCost:0,tpGain:0,effects:[],messageType:0,...e}),Pe=e=>({id:0,name:"",iconIndex:0,restriction:0,priority:50,motion:0,overlay:0,removeAtBattleEnd:!1,removeByRestriction:!1,autoRemovalTiming:0,minTurns:1,maxTurns:1,removeByDamage:!1,chanceByDamage:100,removeByWalking:!1,stepsToRemove:100,message1:"",message2:"",message3:"",message4:"",traits:[],note:"",...e}),fe=e=>({autoplayBgm:!0,autoplayBgs:!1,battleback1Name:"",battleback2Name:"",data:[],disableDashing:!1,displayName:"",encounterList:[],events:[],height:0,note:"",width:0,x:0,y:0,parallaxName:"",parallaxLoopX:!1,parallaxLoopY:!1,parallaxShow:!1,parallaxSx:0,parallaxSy:0,...e}),Ne=e=>({id:0,name:"",note:"",x:0,y:0,pages:[V()],...e}),w=e=>({actorId:0,actorValid:!1,itemId:0,itemValid:!1,selfSwitchCh:"",selfSwitchValid:!1,switch1Id:0,switch1Valid:!1,switch2Id:0,switch2Valid:!1,variableId:0,variableValid:!1,variableValue:0,...e}),k=e=>({characterIndex:0,characterName:"",direction:6,pattern:0,tileId:0,...e}),V=e=>({conditions:w(),image:k(),moveRoute:{list:[],repeat:!1,wait:!1,skippable:!1},directionFix:!1,moveFrequency:0,list:[],...e}),o=(e={})=>({name:e.name??"",volume:e.volume??90,pitch:e.pitch??100,pan:e.pan??0}),Le=(e,t,n=0)=>({code:e,parameters:[o({name:t})],indent:n}),Oe=(e={})=>({local:e.local??"",gameTitle:e.gameTitle??"",currencyUnit:e.currencyUnit??"",title1Name:e.title1Name??"",terms:e.terms??U(),title2Name:e.title2Name??"",optAutosave:e.optAutosave??!1,attackMotions:e.attackMotions??[],startMapId:e.startMapId??0,startX:e.startX??0,startY:e.startY??0,switches:e.switches??[],windowTone:e.windowTone??[0,0,0,0],editMapId:e.editMapId??0,testTroopId:e.testTroopId??0,testBattlers:e.testBattlers??[],versionId:e.versionId??0,advanced:e.advanced??Y(),armorTypes:e.armorTypes??[],elements:e.elements??[],variables:e.variables??[],equipTypes:e.equipTypes??[],sounds:e.sounds??z(),titleBgm:e.titleBgm??o(),gameoverMe:e.gameoverMe??o(),battleBgm:e.battleBgm??o(),defeatMe:e.defeatMe??o(),victoryMe:e.victoryMe??o(),battleback1Name:e.battleback1Name??"",battleback2Name:e.battleback2Name??"",battlerName:e.battlerName??"",weaponTypes:e.weaponTypes??[],skillTypes:e.skillTypes??[],optDisplayTp:e.optDisplayTp??!1,optDrawTitle:e.optDrawTitle??!1,optExtraExp:e.optExtraExp??!1,optFloorDeath:e.optFloorDeath??!1,optFollowers:e.optFollowers??!1,optKeyItemsNumber:e.optKeyItemsNumber??!1,optSideView:e.optSideView??!1,optSlipDeath:e.optSlipDeath??!1,optTransparent:e.optTransparent??!1,boat:e.boat??E(),ship:e.ship??E(),airship:e.airship??E(),tileSize:e.tileSize??0}),U=(e={})=>({messages:y(e.messages??{}),commands:X(e.commands??{}),params:W(e.params??{}),basic:F(e.basic??{})}),F=(e={})=>[e.level??"",e.levelA??"",e.hp??"",e.hpA??"",e.mp??"",e.mpA??"",e.tp??"",e.tpA??"",e.experience??"",e.exp??""],W=(e={})=>[e.mhp??"",e.mmp??"",e.atk??"",e.def??"",e.mat??"",e.mdf??"",e.agi??"",e.luk??"",e.hit??"",e.eva??""],X=(e={})=>[e.fight??"",e.escape??"",e.attack??"",e.guard??"",e.item??"",e.skill??"",e.equip??"",e.status??"",e.formation??"",e.save??"",e.gameEnd??"",e.options??"",e.weapon??"",e.armor??"",e.keyItem??"",e.equip2??"",e.optimize??"",e.clear??"",e.newGame??"",e.continue_??"",e.notUsed20??"",e.toTitle??"",e.cancel??"",e.notUsed23??"",e.buy??"",e.sell??""],y=(e={})=>({alwaysDash:e.alwaysDash??"",commandRemember:e.commandRemember??"",touchUI:e.touchUI??"",bgmVolume:e.bgmVolume??"",bgsVolume:e.bgsVolume??"",meVolume:e.meVolume??"",seVolume:e.seVolume??"",possession:e.possession??"",expTotal:e.expTotal??"",expNext:e.expNext??"",saveMessage:e.saveMessage??"",loadMessage:e.loadMessage??"",file:e.file??"",autosave:e.autosave??"",partyName:e.partyName??"",emerge:e.emerge??"",preemptive:e.preemptive??"",surprise:e.surprise??"",escapeStart:e.escapeStart??"",escapeFailure:e.escapeFailure??"",victory:e.victory??"",defeat:e.defeat??"",obtainExp:e.obtainExp??"",obtainGold:e.obtainGold??"",obtainItem:e.obtainItem??"",levelUp:e.levelUp??"",obtainSkill:e.obtainSkill??"",useItem:e.useItem??"",criticalToEnemy:e.criticalToEnemy??"",criticalToActor:e.criticalToActor??"",actorDamage:e.actorDamage??"",actorRecovery:e.actorRecovery??"",actorGain:e.actorGain??"",actorLoss:e.actorLoss??"",actorDrain:e.actorDrain??"",actorNoDamage:e.actorNoDamage??"",actorNoHit:e.actorNoHit??"",enemyDamage:e.enemyDamage??"",enemyRecovery:e.enemyRecovery??"",enemyGain:e.enemyGain??"",enemyLoss:e.enemyLoss??"",enemyDrain:e.enemyDrain??"",enemyNoDamage:e.enemyNoDamage??"",enemyNoHit:e.enemyNoHit??"",evasion:e.evasion??"",magicEvasion:e.magicEvasion??"",magicReflection:e.magicReflection??"",counterAttack:e.counterAttack??"",substitute:e.substitute??"",buffAdd:e.buffAdd??"",debuffAdd:e.debuffAdd??"",buffRemove:e.buffRemove??"",actionFailure:e.actionFailure??""}),Y=(e={})=>({gameId:e.gameId??0,screenWidth:e.screenWidth??0,screenHeight:e.screenHeight??0,uiAreaWidth:e.uiAreaWidth??0,uiAreaHeight:e.uiAreaHeight??0,windowOpacity:e.windowOpacity??0,screenScale:e.screenScale??0,numberFontFilename:e.numberFontFilename??"",mainFontFilename:e.mainFontFilename??"",fallbackFonts:e.fallbackFonts??"",fontSize:e.fontSize??0}),E=(e={})=>({bgm:e.bgm??o(),characterIndex:e.characterIndex??0,characterName:e.characterName??"",startMapId:e.startMapId??0,startX:e.startX??0,startY:e.startY??0}),z=(e={})=>[e.cursor??o(),e.ok??o(),e.cancel??o(),e.buzzer??o(),e.equip??o(),e.save??o(),e.load??o(),e.battleStart??o(),e.escape??o(),e.enemyAttack??o(),e.enemyDamage??o(),e.enemyCollapse??o(),e.bossCollapse1??o(),e.bossCollapse2??o(),e.actorDamage??o(),e.actorCollapse??o(),e.playRecovery??o(),e.playMiss??o(),e.playEvasion??o(),e.playMagicEvasion??o(),e.playReflection??o(),e.shop??o(),e.useItem??o(),e.useSkill??o()],_=(e,t)=>t?e===t.code:!1,x="MessageHeader invalid command",ve="Script invalid command",q="Invalid Head",l=e=>typeof e[0]=="string"&&e.length===1,Ge=(e,t)=>t?e===t.code&&l(t.parameters):!1,A=(e,t,n)=>{const a=[];for(let i=n;i<t.length;i++){const m=t[i];if(_(e,m)&&l(m.parameters))a.push({code:e,indent:m.indent,parameters:[m.parameters[0]]});else break}return a},C=(e,t,n)=>{const a=e[t];if(a&&_(n,a)&&l(a.parameters))return{code:n,indent:a.indent,parameters:[a.parameters[0]]};throw new Error(q,{cause:a})},K=(e,t)=>({head:C(e,t,r.COMMENT),bodys:A(r.COMMENT_BODY,e,t+1)}),j=(e,t)=>({head:C(e,t,r.SCRIPT_EVAL),bodys:A(r.SCRIPT_EVAL_BODY,e,t+1)}),$=(e,t)=>{const n=e[t];if(n&&J(n))return n;throw new Error(x,{cause:n})},J=e=>!e||e.code!==r.SHOW_MESSAGE||![4,5].includes(e.parameters.length)?!1:typeof e.parameters[0]=="string"&&typeof e.parameters[1]=="number"&&typeof e.parameters[2]=="number"&&typeof e.parameters[3]=="number",Z=(e,t)=>({head:$(e,t),bodys:A(r.SHOW_MESSAGE_BODY,e,t+1)}),Q="ScrollTextHeader invalid command",b=(e,t)=>{const n=e[t];if(_(r.SHOW_SCROLLING_TEXT,n))return n;const a={headCode:r.SHOW_SCROLLING_TEXT,bodyCode:r.SHOW_SCROLLING_TEXT_BODY,index:t};throw new Error(Q,{cause:a})},ee=(e,t)=>({head:b(e,t),bodys:A(r.SHOW_SCROLLING_TEXT_BODY,e,t+1)}),te=(e,t=`
`)=>e.map(n=>n.parameters[0]).join(t);class g{constructor(t,n){this.header=t,this.bodies=n}getBodyText(t=`
`){return te(this.getExpandedBodies(),t)}jopinHedderAndBody(){return[this.header,...this.bodies]}joinCommandBodies(){return this.getExpandedBodies()}}class p extends g{constructor(t,n,a){super(n,a),this.bodyCode=t}getExpandedBodies(){return this.bodies}normalizedCommands(){const t={...this.header,code:this.header.code,indent:this.header.indent,parameters:[...this.header.parameters]};return this.bodies.length===0?[t]:[t,this.mergedBody()]}mergedBody(){return{code:this.bodyCode,indent:this.header.indent,parameters:[this.getBodyText()]}}}class T extends g{getExpandedBodies(){return[this.header,...this.bodies]}mergedBody(){return{code:this.header.code,indent:this.header.indent,parameters:[this.getBodyText()]}}normalizedCommands(){return[this.mergedBody()]}}const ne="選択肢ヘルプ",ae=e=>e.parameters[0]===ne,re=(e,t=[])=>new p(401,e,t),ce=(e,t=[])=>new p(405,e,t),se=(e,t=[])=>ae(e)?new p(408,e,t):new T(e,t),oe=(e,t=[])=>new T(e,t),M=(e,t,n)=>{const a=Z(e,t),i=re(a.head,a.bodys);return n(i)},S=(e,t,n)=>{const a=ee(e,t),i=ce(a.head,a.bodys);return n(i)},I=(e,t,n)=>{const a=K(e,t),i=se(a.head,a.bodys);return n(i)},P=(e,t,n)=>{const a=j(e,t),i=oe(a.head,a.bodys);return n(i)},ie=(e,t,n)=>{const a=e[t];switch(a.code){case r.SHOW_MESSAGE:return M(e,t,n.showMessage);case r.SHOW_SCROLLING_TEXT:return S(e,t,n.showScrollingText);case r.COMMENT:return I(e,t,n.comment);case r.SCRIPT_EVAL:return P(e,t,n.script);case r.SHOW_CHOICES:return n.showChoices(a,t,e);case r.SHOW_CHOICES_ITEM:return n.choiceWhen(a,t,e);case r.CHANGE_NAME:return n.changeName(a,t,e);case r.CHANGE_PROFILE:return n.changeProfile(a,t,e);case r.CHANGE_NICKNAME:return n.changeNickname(a,t,e);default:return n.other(a,t,e)}},He=(e,t)=>e.map((n,a,i)=>ie(i,a,t)),s=(e,t,n,a,i)=>a?a(e,t,n):i(e,t,n),me=(e,t)=>e.map((n,a)=>f(e,a,t)),De=(e,t)=>e.flatMap((n,a)=>f(e,a,t)),f=(e,t,n)=>{const a=e[t];switch(a.code){case c.SHOW_MESSAGE:return n.showMessage?M(e,t,n.showMessage):n.other(a,t,e);case c.SHOW_MESSAGE_BODY:return s(a,t,e,n.showMessageBody,n.other);case c.SHOW_SCROLLING_TEXT:return n.showScrollingText?S(e,t,n.showScrollingText):n.other(a,t,e);case c.SHOW_SCROLLING_TEXT_BODY:return s(a,t,e,n.showScrollingTextBody,n.other);case c.SHOW_CHOICES:return s(a,t,e,n.showChoices,n.other);case c.SHOW_CHOICES_ITEM:return s(a,t,e,n.choiceWhen,n.other);case c.COMMENT:return n.comment?I(e,t,n.comment):n.other(a,t,e);case c.COMMENT_BODY:return s(a,t,e,n.commentBody,n.other);case c.SCRIPT_EVAL:return n.script?P(e,t,n.script):n.other(a,t,e);case c.SCRIPT_EVAL_BODY:return s(a,t,e,n.scriptBody,n.other);case c.CONDITIONAL_BRANCH:return s(a,t,e,n.conditionalBranch,n.other);case c.CONTROL_SWITCHES:return s(a,t,e,n.controlSwitch,n.other);case c.CONTROL_VARIABLES:return s(a,t,e,n.controlVariable,n.other);case c.CONTROL_SELF_SWITCH:return s(a,t,e,n.controlSelfSwitch,n.other);case c.CONTROL_TIMER:return s(a,t,e,n.controlTimer,n.other);case c.COMMON_EVENT:return s(a,t,e,n.commonEvent,n.other);case c.CHANGE_SAVE_ACCESS:return s(a,t,e,n.changeSaveAccess,n.other);case c.CHANGE_MENU_ACCESS:return s(a,t,e,n.changeMenuAccess,n.other);case c.CHANGE_ENCOUNTER:return s(a,t,e,n.changeEncounter,n.other);case c.CHANGE_FORMATION_ACCESS:return s(a,t,e,n.changeFormationAccess,n.other);case c.CHANGE_NAME:return s(a,t,e,n.changeName,n.other);case c.CHANGE_PROFILE:return s(a,t,e,n.changeProfile,n.other);case c.CHANGE_NICKNAME:return s(a,t,e,n.changeNickname,n.other);case c.CHANGE_ACTOR_IMAGES:return s(a,t,e,n.changeActorImages,n.other);case c.CHANGE_VEHICLE_IMAGE:return s(a,t,e,n.changeVehicleImage,n.other);case c.CHANGE_BATTLE_BGM:return s(a,t,e,n.changeBattleBGM,n.other);case c.CHANGE_VICTORY_ME:return s(a,t,e,n.changeVictoryME,n.other);case c.CHANGE_DEFEAT_ME:return s(a,t,e,n.changeDefeatME,n.other);case c.PLAY_BGM:return s(a,t,e,n.playBGM,n.other);case c.FADEOUT_BGM:return s(a,t,e,n.fadeOutBGM,n.other);case c.PLAY_SE:return s(a,t,e,n.playSE,n.other);case c.STOP_SE:return s(a,t,e,n.stopSE,n.other);case c.PLAY_ME:return s(a,t,e,n.playME,n.other);case c.LABEL:return s(a,t,e,n.label,n.other);case c.LABEL_JUMP:return s(a,t,e,n.labelJump,n.other);case c.CHANGE_WINDOW_COLOR:return s(a,t,e,n.changeWindowColor,n.other);case c.TINT_SCREEN:return s(a,t,e,n.tintScreen,n.other);case c.FLASH_SCREEN:return s(a,t,e,n.flashScreen,n.other);case c.SHAKE_SCREEN:return s(a,t,e,n.shakeScreen,n.other);case c.SHOW_PICTURE:return s(a,t,e,n.showPicture,n.other);case c.MOVE_PICTURE:return s(a,t,e,n.movePicture,n.other);case c.ROTATE_PICTURE:return s(a,t,e,n.rotatePicture,n.other);case c.TINT_PICTURE:return s(a,t,e,n.tintPicture,n.other);case c.ERASE_PICTURE:return s(a,t,e,n.erasePicture,n.other);case c.BATTLE_PROCESSING:return s(a,t,e,n.battleProcessing,n.other);case c.WAIT:return s(a,t,e,n.wait,n.other);case c.GAME_OVER:return s(a,t,e,n.gameover,n.other);case c.CHANGE_PARALLAX:return s(a,t,e,n.changeParallax,n.other);case c.CHANGE_BATTLE_BACKGROUND:return s(a,t,e,n.changeBattleBackground,n.other);case c.PLAY_MOVIE:return s(a,t,e,n.playMovie,n.other);case c.CHANGE_TRANSPARENCY:return s(a,t,e,n.changeTransparency,n.other);case c.SET_WEATHER_EFFECT:return s(a,t,e,n.setWeatherEffects,n.other);case c.CHANGE_GOLD:return s(a,t,e,n.changeGold,n.other);case c.SHOW_ANIMATION:return s(a,t,e,n.showAnimation,n.other);case c.TRANSFER_PLAYER:return s(a,t,e,n.transferPlayer,n.other);case c.SET_VEHICLE_LOCATION:return s(a,t,e,n.setVehicleLocation,n.other);case c.SET_EVENT_LOCATION:return s(a,t,e,n.setEventLocation,n.other);default:return n.other(a,t,e)}},Be={commentBody:()=>[],showMessageBody:()=>[],scriptBody:()=>[],showScrollingTextBody:()=>[],showMessage:e=>e.normalizedCommands(),showScrollingText:e=>e.normalizedCommands(),comment:e=>e.normalizedCommands(),script:e=>e.normalizedCommands(),other:e=>[e]},h=e=>me(e,Be),we=e=>!!e,ke=(e,t,n)=>({data:e,eventId:t,pageIndex:n}),ue=(e,t,n)=>e.list.map(a=>({data:a,eventId:n.id,pageIndex:t})),N=(e,t)=>e.pages.map((n,a)=>t(n,a,e)),L=(e,t)=>e.events.filter(we).map(n=>N(n,t)),Ve=(e,t)=>L(e,t).flat(2),Ue=(e,t)=>e.map(n=>N(n,t)),Fe=(e,t)=>e.map(n=>t(n,0,n)),We=e=>L(e,ue).flat(2),O=(e,t)=>{const n=t(e.list);return{...e,list:n}},v=(e,t)=>({...e,pages:e.pages.map(n=>O(n,t))}),Ae=(e,t)=>({...e,events:e.events.map(n=>n?v(n,t):null)}),de=(e,t)=>e.map(n=>O(n,t)),Ee=(e,t)=>e.map(n=>v(n,t)),Xe=e=>Ae(e,t=>h(t).flat()),ye=e=>de(e,t=>h(t).flat()),Ye=e=>Ee(e,t=>h(t).flat()),G=(e,t)=>t.includes(e.code),ze=e=>G(e,xe),xe=[c.PLAY_BGM,c.PLAY_BGS,c.PLAY_ME,c.PLAY_SE,c.CHANGE_BATTLE_BGM,c.CHANGE_VICTORY_ME,c.CHANGE_DEFEAT_ME,c.CHANGE_VEHICLE_BGM],qe=e=>G(e,Ke),Ke=[c.SHOW_MESSAGE,c.SHOW_PICTURE,c.CHANGE_ACTOR_IMAGES,c.CHANGE_VEHICLE_IMAGE,c.CHANGE_PARALLAX,c.CHANGE_BATTLE_BACKGROUND],je=(e,t)=>({code:e.code,paramIndex:t,value:e.parameters[t]}),$e=(e,t)=>({code:e.code,paramIndex:t,value:e.parameters[t]}),Je=(e,t)=>({code:e.code,paramIndex:t,value:e.parameters[t]}),Ze=(e,t,n=0)=>({code:e,indent:n,parameters:t}),H=(e,t)=>`<${e}:${t}>`,d=()=>/<([^<>:]+):([^>]*)>/g,Qe=(e,t)=>D(e.note,(n,a)=>t(n,a,e)),be=e=>D(e,(t,n)=>[t,n]),D=(e,t)=>{const n=d(),a=[];let i;for(;(i=n.exec(e))!==null;)a.push(t(i[1],i[2]));return a},et=(e,t)=>e.replace(d(),(n,a,i)=>{const m=t(a,i);return H(a,m)}),tt=(e,t)=>{const n=d();let a;for(;(a=n.exec(e))!==null;)if(a[1]===t)return a[2]},nt=(e,t,n)=>{const a=d();return e.replace(a,(i,m)=>m===t?H(m,n):i)},at=e=>`code:${e}`,rt="N",ct="V",B=(e,t)=>`\\${e}[${t}]`,Re=e=>B(rt,e.id),st=e=>e.map(t=>({controlChar:Re(t),text:t.name})),ot=e=>e.variables.map((t,n)=>({text:t||"",controlChar:B(ct,n)})).filter(t=>t.text!==""),it=new Set(["px","py","x","y","v","n","p","g","c","i","fs"]),mt=(e,t=it)=>{const n=/\\([A-Za-z]+)\[(\d+)]/g,a=[];let i;for(;(i=n.exec(e))!==null;){const m=i[1].toLowerCase(),le=parseInt(i[2],10);t.has(m)&&a.push({char:i[1],id:le})}return a},_e=(e,t,n)=>t.map(a=>n(a,e[a],e)),ut=(e,t,n)=>_e(e,t,n),At=e=>e.variables.map((t,n)=>({id:n,name:t})),dt=e=>e.elements.map((t,n)=>({id:n,name:t})),Et=e=>e.equipTypes.map((t,n)=>({id:n,name:t})),Rt=e=>e.skillTypes.map((t,n)=>({id:n,name:t})),_t=e=>e.weaponTypes.map((t,n)=>({id:n,name:t})),lt=e=>e.armorTypes.map((t,n)=>({id:n,name:t})),pt=e=>e.terms.params.map((t,n)=>({id:n,name:t})),ht=(e,t)=>{switch(e){case r.REGULAR_PARAM_MAX_HP:return t.maxHp;case r.REGULAR_PARAM_MAX_MP:return t.maxMp;case r.REGULAR_PARAM_ATK:return t.atk;case r.REGULAR_PARAM_DEF:return t.def;case r.REGULAR_PARAM_MATK:return t.matk;case r.REGULAR_PARAM_MDEF:return t.mdef;case r.REGULAR_PARAM_AGI:return t.agi;case r.REGULAR_PARAM_LUK:return t.luk;default:return`?rparams[${e}]`}},Ct=(e,t)=>{switch(e){case r.EXTRA_PARAM_CEV:return t.criticalEvasionRate;case r.EXTRA_PARAM_EVA:return t.evasionRate;case r.EXTRA_PARAM_CNT:return t.counterAttackRate;case r.EXTRA_PARAM_CRI:return t.criticalRate;case r.EXTRA_PARAM_HIT:return t.hitRate;case r.EXTRA_PARAM_HRG:return t.hpRegenerationRate;case r.EXTRA_PARAM_MEV:return t.magicEvasionRate;case r.EXTRA_PARAM_MRF:return t.magicReflectionRate;case r.EXTRA_PARAM_MRG:return t.mpRegenerationRate;case r.EXTRA_PARAM_TRG:return t.tpRegenerationRate}return`?xparams[${e}]`},gt=(e,t)=>{switch(e){case r.SPECIAL_PARAM_EXR:return t.experienceRate;case r.SPECIAL_PARAM_TGR:return t.targetRate;case r.SPECIAL_PARAM_FDR:return t.floorDamageRate;case r.SPECIAL_PARAM_GRD:return t.guradEffectRate;case r.SPECIAL_PARAM_MCR:return t.mpCostRate;case r.SPECIAL_PARAM_TCR:return t.tpChargeRate;case r.SPECIAL_PARAM_PDR:return t.physicalDamageRate;case r.SPECIAL_PARAM_MDR:return t.magicDamageRate;case r.SPECIAL_PARAM_PHA:return t.pharmacology;case r.SPECIAL_PARAM_REC:return t.recoveryEffectRate}return`?sparams[${e}]`},Tt=(e,t)=>[{id:r.COLLAPS_NORMAL,name:t.normal},{id:r.COLLAPS_BOSS,name:e.bossCollaps},{id:r.COLLAPS_INSTANT,name:e.instantCollaps},{id:r.COLLAPS_NONE,name:e.noneCollaps}],Mt=e=>[{id:r.PARTY_ABILITY_ENCOUNTER_HALF,name:e.encounterHalf},{id:r.PARTY_ABILITY_ENCOUNTER_NONE,name:e.encounterNone},{id:r.PARTY_ABILITY_CANCEL_SURPRISE,name:e.cancelSurprise},{id:r.PARTY_ABILITY_RAISE_PREEMPTIVE,name:e.raisePreemptive},{id:r.PARTY_ABILITY_GOLD_DOUBLE,name:e.goldDouble},{id:r.PARTY_ABILITY_DROP_ITEM_DOUBLE,name:e.dropItemDouble}],St=e=>[{id:r.REGULAR_PARAM_MAX_HP,name:e.maxHp},{id:r.REGULAR_PARAM_MAX_MP,name:e.maxMp},{id:r.REGULAR_PARAM_ATK,name:e.atk},{id:r.REGULAR_PARAM_DEF,name:e.def},{id:r.REGULAR_PARAM_MATK,name:e.matk},{id:r.REGULAR_PARAM_MDEF,name:e.mdef},{id:r.REGULAR_PARAM_AGI,name:e.agi},{id:r.REGULAR_PARAM_LUK,name:e.luk}],It=e=>[{id:r.EXTRA_PARAM_HIT,name:e.hitRate},{id:r.EXTRA_PARAM_EVA,name:e.evasionRate},{id:r.EXTRA_PARAM_CRI,name:e.criticalRate},{id:r.EXTRA_PARAM_CEV,name:e.criticalEvasionRate},{id:r.EXTRA_PARAM_MEV,name:e.magicEvasionRate},{id:r.EXTRA_PARAM_MRF,name:e.magicReflectionRate},{id:r.EXTRA_PARAM_CNT,name:e.counterAttackRate},{id:r.EXTRA_PARAM_HRG,name:e.hpRegenerationRate},{id:r.EXTRA_PARAM_MRG,name:e.mpRegenerationRate},{id:r.EXTRA_PARAM_TRG,name:e.tpRegenerationRate}],Pt=e=>[{id:r.SPECIAL_PARAM_TGR,name:e.targetRate},{id:r.SPECIAL_PARAM_GRD,name:e.guradEffectRate},{id:r.SPECIAL_PARAM_REC,name:e.recoveryEffectRate},{id:r.SPECIAL_PARAM_PHA,name:e.pharmacology},{id:r.SPECIAL_PARAM_MCR,name:e.mpCostRate},{id:r.SPECIAL_PARAM_TCR,name:e.tpChargeRate},{id:r.SPECIAL_PARAM_PDR,name:e.physicalDamageRate},{id:r.SPECIAL_PARAM_MDR,name:e.magicDamageRate},{id:r.SPECIAL_PARAM_FDR,name:e.floorDamageRate},{id:r.SPECIAL_PARAM_EXR,name:e.experienceRate}];exports.BaseEventCommandGroup=g;exports.CHOICE_HELP_TEXT=ne;exports.CombinedEventCommandGroup=T;exports.ERROR_COMMAND_MESSAGE=x;exports.ERROR_COMMAND_SCRIPT=ve;exports.ERROR_INVALID_HEAD=q;exports.ERROR_MESSAGE=Q;exports.SimpleEventCommandGroup=p;exports.callHandler=s;exports.codeInfoText=at;exports.codeTest=_;exports.collectMapEvents=Ve;exports.constructActor=he;exports.constructArmor=ge;exports.constructClass=Me;exports.constructDamage=R;exports.constructEnemy=Ce;exports.constructItem=Se;exports.constructParamArray=u;exports.constructSkill=Ie;exports.constructState=Pe;exports.constructWeapon=Te;exports.createAdvanced=Y;exports.createAudio=o;exports.createAudioCommand=Le;exports.createBasicTerms=F;exports.createCommandContext=ue;exports.createCommandsArray=X;exports.createCommentGroup=se;exports.createCondtion=w;exports.createControlCharFormat=B;exports.createEventCommand=Ze;exports.createEventContext=ke;exports.createEventPage=V;exports.createMap=fe;exports.createMapEvent=Ne;exports.createMapEventImage=k;exports.createMessageGroup=re;exports.createMessages=y;exports.createNoteEntity=H;exports.createParamNamesArray=W;exports.createScriptGroup=oe;exports.createScrlloingTextGroup=ce;exports.createSystemData=Oe;exports.createSystemSoundsArray=z;exports.createTerms=U;exports.createVehicle=E;exports.extraParamName=Ct;exports.flatMappingCommandList=De;exports.foldCollapsOptions=Tt;exports.foldExtraParam=It;exports.foldPartyAbilityOptions=Mt;exports.foldRegularParam=St;exports.foldSpecialParams=Pt;exports.fromActor=Re;exports.fromActors=st;exports.fromSystem=ot;exports.gatherEventCommandContext=We;exports.getArmorTypes=lt;exports.getControlChars=mt;exports.getElements=dt;exports.getEquipTypes=Et;exports.getNoteValue=tt;exports.getParamNames=pt;exports.getSkillTypes=Rt;exports.getVariableNames=At;exports.getWeaponTypes=_t;exports.handleGroupComment=I;exports.handleGroupMessage=M;exports.handleGroupScript=P;exports.handleGroupScrollingText=S;exports.handlerDispatch=ie;exports.isAudioCommand=ze;exports.isBodyParams=l;exports.isChoiceHelp=ae;exports.isHeadCommand=Ge;exports.isImageCommand=qe;exports.isMessageHeader=J;exports.joinCommandBodies=te;exports.makeRegex=d;exports.mapTextCommand=He;exports.mappingCommand=f;exports.mappingCommandList=me;exports.matchesEventCommand=G;exports.normalizedCommands=h;exports.normalizedCommonEvents=ye;exports.normalizedMapData=Xe;exports.normalizedTroops=Ye;exports.pickCommandParamAudio=Je;exports.pickCommandParamNumber=$e;exports.pickCommandParamString=je;exports.pickCommands=A;exports.pickComments=K;exports.pickHead=C;exports.pickMessageHeader=$;exports.pickMessageWithHead=Z;exports.pickPropertys=_e;exports.pickScripts=j;exports.pickScrollText=ee;exports.pickScrollTextHeader=b;exports.pickString=ut;exports.processCommonEvents=Fe;exports.processEventPages=N;exports.processMapEvents=L;exports.processTroopEvents=Ue;exports.readNote=be;exports.readNoteEx=D;exports.readNoteObject=Qe;exports.regularParamName=ht;exports.replaceCommonEvents=de;exports.replaceEventCommands=O;exports.replaceMapEvents=Ae;exports.replaceNote=et;exports.replacePages=v;exports.replaceTroops=Ee;exports.setNoteValue=nt;exports.specialParamName=gt;
//# sourceMappingURL=rpg-data-tools.cjs.js.map
